{% extends "admin/base.html" %}
{% block title %}{% if post %}ç¼–è¾‘æ–‡ç« {% else %}æ–°å»ºæ–‡ç« {% endif %}{% endblock %}

{% block content %}
<div class="admin-header">
  <h1>{% if post %}ç¼–è¾‘ï¼š{{ post.slug }}{% else %}æ–°å»ºæ–‡ç« {% endif %}</h1>
  {% if post %}
    <a href="{{ url_for('post_detail', slug=post.slug) }}" target="_blank" class="btn btn-secondary">ğŸŒ é¢„è§ˆ</a>
  {% endif %}
</div>

{% if post %}
  <!-- ç¼–è¾‘å·²æœ‰æ–‡ç« ï¼šç›´æ¥ç¼–è¾‘åŸå§‹ MD å†…å®¹ -->
  <form method="post">
    <div class="editor-wrap">
      <textarea name="content" id="editor" class="md-editor">{{ post.raw }}</textarea>
    </div>
    <div class="editor-footer">
      <button type="submit" class="btn btn-primary">ğŸ’¾ ä¿å­˜</button>
      <a href="{{ url_for('admin_index') }}" class="btn btn-secondary">è¿”å›</a>
    </div>
  </form>

{% else %}
  <!-- æ–°å»ºæ–‡ç« ï¼šå¡«å†™ Front Matter + æ­£æ–‡ -->
  <form method="post">
    <div class="new-post-meta">
      <div class="form-group">
        <label>æ–‡ç« æ ‡é¢˜ *</label>
        <input type="text" name="title" required placeholder="è¾“å…¥æ ‡é¢˜ï¼Œæ–‡ä»¶åå°†è‡ªåŠ¨ç”Ÿæˆ" />
      </div>
      <div class="form-group">
        <label>æ—¥æœŸ</label>
        <input type="date" name="date" value="{{ today }}" />
      </div>
      <div class="form-group">
        <label>æ ‡ç­¾ï¼ˆé€—å·åˆ†éš”ï¼‰</label>
        <input type="text" name="tags" placeholder="æŠ€æœ¯, éšç¬”, Python" />
      </div>
      <div class="form-group">
        <label>æ‘˜è¦ï¼ˆå¯é€‰ï¼‰</label>
        <input type="text" name="summary" placeholder="ç•™ç©ºåˆ™è‡ªåŠ¨æˆªå–æ­£æ–‡å‰120å­—" />
      </div>
    </div>
    <div class="editor-wrap">
      <label style="display:block; margin-bottom:0.5rem; color:#555; font-size:0.9rem;">æ­£æ–‡å†…å®¹ï¼ˆMarkdownï¼‰</label>
      <textarea name="content" id="editor" class="md-editor" placeholder="åœ¨è¿™é‡Œå†™æ­£æ–‡..."></textarea>
    </div>
    <div class="editor-footer">
      <button type="submit" class="btn btn-primary">ğŸ’¾ åˆ›å»ºæ–‡ç« </button>
      <a href="{{ url_for('admin_index') }}" class="btn btn-secondary">è¿”å›</a>
    </div>
  </form>
{% endif %}
{% endblock %}
