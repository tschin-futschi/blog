{% extends "admin/base.html" %}
{% block title %}ç”¨æˆ·ç®¡ç†{% endblock %}

{% block content %}
<div class="admin-header">
  <h1>ğŸ‘¥ ç”¨æˆ·ç®¡ç†</h1>
</div>

<div style="display:grid; grid-template-columns: 1fr 1fr; gap:2rem;">
  <!-- ç”¨æˆ·åˆ—è¡¨ -->
  <div>
    <h3 style="margin-bottom:1rem;">ç°æœ‰ç”¨æˆ·</h3>
    <div class="admin-table-wrap">
      <table class="admin-table">
        <thead><tr><th>ç”¨æˆ·å</th><th>æ“ä½œ</th></tr></thead>
        <tbody>
          {% for username in users %}
          <tr>
            <td>{{ username }}</td>
            <td>
              {% if username != session.username %}
              <form method="post" style="display:inline;"
                    onsubmit="return confirm('ç¡®å®šåˆ é™¤ç”¨æˆ· {{ username }}ï¼Ÿ')">
                <input type="hidden" name="action" value="delete" />
                <input type="hidden" name="username" value="{{ username }}" />
                <button type="submit" class="btn btn-sm btn-danger">åˆ é™¤</button>
              </form>
              {% else %}
              <span style="color:#aaa; font-size:0.85rem;">å½“å‰ç”¨æˆ·</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- æ·»åŠ ç”¨æˆ· -->
  <div>
    <h3 style="margin-bottom:1rem;">æ·»åŠ æ–°ç”¨æˆ·</h3>
    <form method="post" class="user-form">
      <input type="hidden" name="action" value="add" />
      <div class="form-group">
        <label>ç”¨æˆ·å</label>
        <input type="text" name="username" required />
      </div>
      <div class="form-group">
        <label>å¯†ç </label>
        <input type="password" name="password" required />
      </div>
      <button type="submit" class="btn btn-primary">æ·»åŠ ç”¨æˆ·</button>
    </form>
  </div>
</div>
{% endblock %}
