{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<div class="layout layout--post">
  <!-- 文章主体 -->
  <article class="post-body">
    <header class="post-header">
      <div class="post-meta">
        <time>{{ post.date_str }}</time>
        {% for tag in post.tags %}
          <a href="/blog/tag/{{ tag }}" class="tag">#{{ tag }}</a>
        {% endfor %}
      </div>
      <h1>{{ post.title }}</h1>
    </header>

    <div class="markdown-body">
      {{ post.content | safe }}
    </div>

    <!-- 上一篇 / 下一篇 -->
    <nav class="post-nav">
      {% if prev_post %}
        <a href="/blog/{{ prev_post.slug }}" class="post-nav__prev">
          ← {{ prev_post.title }}
        </a>
      {% else %}
        <span></span>
      {% endif %}
      {% if next_post %}
        <a href="/blog/{{ next_post.slug }}" class="post-nav__next">
          {{ next_post.title }} →
        </a>
      {% endif %}
    </nav>
  </article>

  <!-- 右侧：目录 -->
  {% if post.toc %}
  <aside class="sidebar toc-sidebar">
    <h3>目录</h3>
    <div class="toc">{{ post.toc | safe }}</div>
  </aside>
  {% endif %}
</div>
{% endblock %}
